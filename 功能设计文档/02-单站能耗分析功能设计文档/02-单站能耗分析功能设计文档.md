# 单站能耗分析功能设计文档

UI地址：https://www.figma.com/design/k5TBKzoZJ0DPn5LobyEc20/%E9%AB%98%E9%93%81%E7%AB%99%E8%83%BD%E8%80%97%E6%BC%94%E7%A4%BA?node-id=22-1349&m=dev

## 1. 功能概述

单站能耗分析模块是高铁站节能降耗演示系统的核心功能之一，主要用于对单个高铁站的能耗数据进行深入分析和趋势预测。该模块通过多维度的数据展示和交互式分析，帮助用户全面了解车站的能耗情况，识别异常能耗，并为节能策略的制定提供数据支持。

### 1.1 功能定位

- **数据分析中心**：作为系统的核心数据分析模块，提供深入的能耗分析能力
- **决策支持工具**：为管理人员提供基于数据的决策支持
- **异常检测系统**：实时监控并识别能耗异常情况
- **趋势预测引擎**：基于历史数据预测未来能耗趋势

### 1.2 用户群体

- **能源管理专员**：负责车站能耗监控和分析
- **运营管理人员**：关注运营成本和效率
- **高层管理者**：需要宏观数据支持决策

### 1.3 核心价值

- **全面性**：提供多角度、多维度的能耗分析
- **直观性**：通过丰富的图表展示能耗数据
- **智能性**：集成异常检测和趋势预测功能
- **实用性**：支持导出分析报告，便于分享和存档

## 2. 功能架构

单站能耗分析模块的功能架构如下：

```
单站能耗分析
├── 数据筛选模块
│   ├── 站点选择
│   ├── 时间范围设置
│   └── 时间粒度设置
├── 指标概览模块
│   ├── 总能耗指标
│   ├── 单位面积能耗指标
│   ├── 能耗成本指标
│   └── 能源效率指标
├── 能耗趋势分析模块
│   ├── 趋势图表展示
│   └── 趋势数据导出
├── 能耗结构分析模块
│   ├── 能耗结构占比图
│   └── 部门能耗对比图
├── 异常检测模块
│   ├── 异常能耗记录
│   ├── 异常详情查看
│   └── 异常处理标记
└── 能耗预测模块
    ├── 预测参数设置
    ├── 预测结果展示
    └── 预测数据导出
```

## 3. 详细功能设计

### 3.1 左侧导航栏

左侧导航栏提供了不同分析视图的切换功能，包括：

#### 3.1.1 导航选项

- **数据概览**：展示关键能耗指标和概览信息
- **趋势分析**：展示能耗随时间变化的趋势图表
- **结构分析**：展示能耗的结构组成和分布情况
- **异常检测**：展示能耗异常记录和处理情况
- **设置管理**：配置分析参数和系统设置

#### 3.1.2 设计规范

- 采用侧边栏设计，固定宽度240px
- 导航项采用图标+文字的形式，图标使用FontAwesome图标库
- 选中状态使用主题色#409EFF作为高亮色
- 鼠标悬停时使用浅灰色#F1F5F9作为背景色

### 3.2 筛选条件区域

筛选条件区域允许用户自定义分析的数据范围和粒度：

#### 3.2.1 筛选条件

- **站点选择**：从预定义的车站列表中选择一个车站进行分析
- **时间范围**：支持自定义日期范围，默认显示最近30天
- **时间粒度**：支持按日、周、月、年等不同粒度进行分析

#### 3.2.2 操作按钮

- **查询按钮**：根据筛选条件查询并更新数据
- **重置按钮**：将所有筛选条件重置为默认值

#### 3.2.3 设计规范

- 使用Element UI的表单组件构建
- 采用响应式布局，在不同屏幕尺寸下自适应调整
- 查询和重置按钮采用主要按钮和次要按钮样式

### 3.3 能耗指标概览

能耗指标概览区域以卡片形式展示关键能耗指标：

#### 3.3.1 指标卡片

- **总能耗**：显示选定时间范围内的总能耗值，单位为kWh
- **单位面积能耗**：显示单位面积的能耗值，单位为kWh/㎡
- **能耗成本**：显示能耗产生的总成本，单位为元
- **能源效率**：显示能源利用效率百分比

#### 3.3.2 趋势信息

每个指标卡片都包含同比和环比趋势信息：

- **同比趋势**：与去年同期相比的百分比变化
- **环比趋势**：与上一个统计周期相比的百分比变化
- 趋势值使用颜色区分，正值用红色(#F56C6C)，负值用绿色(#67C23A)

#### 3.3.3 设计规范

- 采用响应式网格布局，4个指标卡片分别在中等及以上屏幕中占3列，在小屏幕中占12列
- 卡片使用白色背景，带有轻微阴影效果
- 鼠标悬停时卡片轻微上浮，增强交互体验
- 指标值使用大字号显示，突出重要性

### 3.4 能耗趋势分析

能耗趋势分析区域展示选定时间范围内的能耗变化趋势：

#### 3.4.1 图表展示

- 使用ECharts绘制线性趋势图
- 支持多条数据线的对比展示
- 支持数据点悬停提示详情
- 支持图表全屏查看功能

#### 3.4.2 设计规范

- 图表标题使用页面主题色#409EFF
- 支持响应式布局，在小屏幕中图表高度自动调整
- 提供图表全屏查看功能，增强数据分析体验

### 3.5 能耗结构分析

能耗结构分析区域包含两个图表：

#### 3.5.1 能耗结构占比图

- 使用ECharts绘制饼图
- 展示不同类型能耗的占比情况
- 支持饼图扇形区域的交互悬停

#### 3.5.2 部门能耗对比图

- 使用ECharts绘制柱状图
- 展示不同部门之间的能耗对比
- 支持柱状图的交互悬停

#### 3.5.3 设计规范

- 在中等及以上屏幕中，两个图表各占6列；在小屏幕中各占12列
- 图表容器使用白色背景和轻微阴影
- 图表标题使用页面主题色#409EFF

### 3.6 异常能耗检测

异常能耗检测区域展示识别出的能耗异常记录：

#### 3.6.1 异常记录表格

- 表格展示异常能耗的时间、能耗值、预期值、偏差率和异常原因
- 偏差率使用标签形式展示，根据正负值使用不同颜色
- 提供分页功能，支持大量数据的分页浏览

#### 3.6.2 操作功能

- **查看详情**：查看异常能耗的详细分析
- **标记已处理**：将异常标记为已处理状态
- **导出报告**：将异常记录导出为CSV格式报告

#### 3.6.3 设计规范

- 表格使用Element UI的表格组件
- 表头使用浅灰色背景#F8FAFC
- 表格操作按钮使用不同的主题色区分功能

### 3.7 能耗预测分析

能耗预测分析区域展示基于历史数据的未来能耗预测：

#### 3.7.1 预测参数

- 支持设置预测天数（7天、15天或30天）
- 预测基于选定时间范围内的历史数据

#### 3.7.2 预测结果

- 使用ECharts绘制预测曲线图
- 区分历史数据和预测数据，使用不同样式
- 支持图表交互和数据点悬停提示

#### 3.7.3 设计规范

- 预测参数选择器使用Element UI的选择器组件
- 图表使用页面主题色#409EFF
- 预测数据使用虚线样式，与历史数据的实线形成区分

## 4. 数据结构设计

### 4.1 站点信息数据

```javascript
{
  stationList: [
    { label: '北京南站', value: 'beijing-south' },
    { label: '上海虹桥站', value: 'shanghai-hongqiao' },
    { label: '广州南站', value: 'guangzhou-south' },
    { label: '深圳北站', value: 'shenzhen-north' },
    { label: '杭州东站', value: 'hangzhou-east' },
    { label: '成都东站', value: 'chengdu-east' }
  ]
}
```

### 4.2 能耗指标数据结构

```javascript
{
  totalEnergy: '2,345,678',        // 总能耗值
  unitAreaEnergy: '123.45',        // 单位面积能耗
  energyCost: '187,654.32',        // 能耗成本
  energyEfficiency: '85.6',        // 能源效率百分比
  
  // 趋势数据
  energyTrend: { 
    yoy: '5.2',    // 同比百分比
    mom: '-2.1'    // 环比百分比
  },
  unitAreaTrend: { 
    yoy: '3.1', 
    mom: '1.8' 
  },
  costTrend: { 
    yoy: '7.5', 
    mom: '-0.5' 
  },
  efficiencyTrend: { 
    yoy: '2.8', 
    mom: '1.2' 
  }
}
```

### 4.3 能耗趋势数据结构

```javascript
{
  dates: ['2024-01-01', '2024-01-02', ...],  // 日期数组
  energyData: [1234, 1456, 1678, ...],       // 能耗数据数组
  predictionData: [1789, 1901, 2012, ...]    // 预测数据数组（可选）
}
```

### 4.4 能耗结构数据结构

```javascript
{
  // 能耗结构占比数据
  structureData: [
    { name: '照明', value: 25 },
    { name: '空调', value: 35 },
    { name: '电梯', value: 15 },
    { name: '给排水', value: 10 },
    { name: '其他', value: 15 }
  ],
  
  // 部门能耗对比数据
  departmentData: [
    { name: '候车大厅', value: 30 },
    { name: '售票厅', value: 15 },
    { name: '站台', value: 20 },
    { name: '办公区', value: 10 },
    { name: '设备房', value: 25 }
  ]
}
```

### 4.5 异常能耗数据结构

```javascript
{
  abnormalEnergyList: [
    {
      id: 1,
      time: '2024-01-15 08:30:00',
      energyValue: '23,456',
      expectedValue: '18,500',
      deviation: '26.7',
      reason: '空调系统异常运行'
    },
    // 更多异常记录...
  ]
}
```

## 5. 交互流程设计

### 5.1 数据查询流程

```
用户进入单站能耗分析页面
    ↓
系统默认加载第一个站点的数据
    ↓
用户设置筛选条件（站点、时间范围、时间粒度）
    ↓
用户点击"查询"按钮
    ↓
系统根据筛选条件请求数据
    ↓
系统更新能耗指标、图表和异常记录
    ↓
用户查看分析结果
```

### 5.2 异常处理流程

```
系统检测到能耗异常
    ↓
异常记录添加到异常列表
    ↓
用户点击"查看详情"按钮
    ↓
系统展示异常详细分析
    ↓
用户分析异常原因并采取处理措施
    ↓
用户点击"标记已处理"按钮
    ↓
异常记录状态更新为"已处理"
```

### 5.3 图表交互流程

```
用户进入单站能耗分析页面
    ↓
图表组件加载并初始化
    ↓
用户悬停或点击图表元素
    ↓
系统展示数据详情提示
    ↓
用户使用图表交互功能（如全屏查看）
    ↓
系统响应用户操作并更新图表视图
```

## 6. 异常处理机制

### 6.1 数据加载异常

- **场景**：数据请求失败或超时
- **处理**：显示错误提示信息，提供重试按钮
- **用户反馈**：明确告知错误原因和解决建议

### 6.2 数据格式异常

- **场景**：服务器返回的数据格式不符合预期
- **处理**：尝试解析数据，如无法解析则使用默认数据
- **用户反馈**：在控制台输出错误信息，并在界面上显示友好提示

### 6.3 图表渲染异常

- **场景**：图表库加载失败或渲染出错
- **处理**：显示图表加载失败的提示信息
- **用户反馈**：提供图表加载失败的原因和解决建议

## 7. 性能优化方案

### 7.1 数据缓存

- 缓存已查询的数据，避免重复请求
- 根据筛选条件生成唯一缓存键
- 设置缓存过期时间，确保数据的时效性

### 7.2 图表优化

- 使用ECharts的按需加载功能，只加载必要的图表组件
- 对于大数据量的图表，使用数据聚合减少数据点数量
- 实现图表的延迟渲染，提升页面初始加载速度

### 7.3 分页加载

- 对于大量数据的列表，使用分页加载减少一次性渲染的数据量
- 根据用户滚动位置动态加载下一页数据

## 8. 安全考虑

### 8.1 数据安全

- 对敏感数据进行脱敏处理
- 实现基于角色的数据访问控制
- 记录关键操作的审计日志

### 8.2 接口安全

- 对所有数据请求进行身份验证
- 使用HTTPS协议传输数据
- 对输入参数进行验证和过滤

## 9. 响应式设计

### 9.1 布局适配

- 在大屏幕（≥1200px）中显示完整的侧边栏和内容区域
- 在中等屏幕（768px-1199px）中适当缩小侧边栏宽度
- 在小屏幕（<768px）中转换为垂直布局，侧边栏变为顶部导航

### 9.2 图表适配

- 图表容器在小屏幕中自动调整高度
- 图表中的文字和图例在小屏幕中适当缩小
- 复杂图表在小屏幕中提供简化的视图模式

## 10. 后续迭代计划

### 10.1 功能增强

- 添加更多维度的能耗分析（如按设备类型、按区域等）
- 增强异常检测算法，提高检测准确性
- 添加更多预测模型，提高预测精度

### 10.2 用户体验优化

- 添加图表的更多交互功能（如缩放、平移等）
- 实现自定义仪表板功能，允许用户个性化配置
- 添加能耗分析报告的自动生成和定时推送功能

### 10.3 性能优化

- 实现更智能的数据缓存策略
- 添加数据预加载功能，提升用户体验
- 优化大数据量场景下的图表渲染性能

## 11. 附录

### 11.1 依赖库和框架

- Vue.js 3.0+
- Element UI 2.15+
- ECharts 5.0+
- FontAwesome 5.0+

### 11.2 相关文档

- 系统总体需求文档
- 系统架构设计文档
- 数据库设计文档
- 接口设计文档

---

*文档版本：1.0*  
*创建日期：2026-01-04*  
*最后更新：2026-01-04*  
*创建者：系统架构师*  
*审核者：产品经理*